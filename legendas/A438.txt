0
[MÚSICA] [MÚSICA] OLÁ 
1
BEM VINDO AO CURSO SOBRE TDD 
2
EU SOU O CLOVIS FERNANDES E HOJE IREMOS APRESENTAR EXEMPLO DE REFATORAÇÃO 
3
COM BASE NO MAU CHEIRO QUE A GENTE CHAMA DE INVEJA DE CARACTERÍSTICA 
4
PARA ISSO NÓS IREMOS APLICAR O EXTRACT METHOD E OUTRAS BOAS PRÁTICAS 
5
PARA RESOLVER ESSE PROBLEMA DE MAU CHEIRO 
6
O INVEJA DE CARACTERÍSTICA QUE NO CATÁLOGO DO FOWLER NÃO É 
7
RECEBE O NOME DE FEATURE ENVY NÃO É 
8
A TRADUÇÃO LITERAL QUE EU FIZ NÃO É ESTÁ CERTO 
9
PARA O PORTUGUÊS 
10
ELE SE CARACTERIZA POR MÉTODO QUE FAZ 
11
MAIS USO DE DE CARACTERÍSTICAS E DE DADOS E MÉTODOS DE 
12
OUTRA CLASSE DO QUE DA PRÓPRIA CLASSE ESTÁ CERTO 
13
POR ISSO QUE ELE CHAMA DE INVEJA 
14
PORQUE ELE ESTÁ USANDO DE OUTRA VEZ DE USAR A DA PRÓPRIA CLASSE ESTÁ CERTO 
15
ISSO É O QUE VAI CARACTERIZAR 
16
E COMO A GENTE MOSTROU ISSO É MAU CHEIRO 
17
NÃO MUITO AGRADÁVEL QUE CAUSA ALGUNS PROBLEMAS 
18
OS REMÉDIOS PARA ESSE MAU CHEIRO SÃO TÉCNICAS DE REFATORAÇÃO 
19
QUE TAMBÉM ESTÃO LÁ CATALOGADAS NO LIVRO DO FOWLER NÃO É 
20
QUE É O MOVER MÉTODO E O EXTRACT METHOD 
21
NO NOSSO EXEMPLO AQUI A GENTE VAI USAR UMA MISTURA DOS 2 
22
PORQUE NÓS VAMOS NA VERDADE MOVER UMA CÓPIA DO MÉTODO 
23
EU MOVO O MÉTODO 
24
QUANDO EU NÃO PRECISO MAIS QUE AQUELE MÉTODO FIQUE NO LUGAR QUE ESTAVA NÃO É 
25
ESTÁ CERTO 
26
MAS NO CASO EU VOU MOVER UMA CÓPIA 
27
EU QUERO QUE AQUELE MÉTODO ANTERIOR CONTINUE NO PRÓPRIO LUGAR ESTÁ CERTO 
28
O EXEMPLO QUE EU VOU USAR AQUI 
29
EU ADAPTEI DESSE SITE QUE VOCÊS ESTÃO VENDO AQUI 
30
SOBRE O DO JOSHUA KERIEVSKY QUE É GRANDE GURU 
31
TAMBÉM NESSA ÁREA DE DE REFATORAÇÃO ESTÁ CERTO 
32
ENTÃO É EXEMPLO QUE VOCÊ TEM É 2 CLASSES NÃO É 
33
ESTÁ CERTO 
34
EU TENHO A CLASSE CUSTOMER E EU TENHO A CLASSE PHONE ESTÁ CERTO 
35
EU COMEÇO ENTÃO NO MEU PROCESSO NO MEU CICLO DE REFATORAÇÃO NÃO É ESTÁ CERTO 
36
A FAREJAR ESSE CÓDIGO NÃO É ESTÁ CERTO 
37
VOCÊS PERCEBAM ENTÃO QUE EU CONSIGO VISUALIZAR QUE 
38
PHONE EXISTEM É OS DADOS DO TELEFONE 
39
ELES ESTÃO EXPOSTOS ATRAVÉS DE MÉTODOS GETTERS PÚBLICOS NÃO É ESTÁ CERTO 
40
E O MAU CHEIRO SE ENCONTRA ALI NA CLASSE CUSTOMER NÃO É ESTÁ CERTO 
41
PORQUE É ONDE ELE NA CLASSE CUSTOMER O ACESSO AOS DADOS EXPOSTOS É MUITO GRANDE 
42
EU USO TOTALMENTE AQUILO EU VOU USAR OS DADOS 
43
DO PHONE INDEVIDAMENTE ESTÁ CERTO 
44
ENTÃO ESSE É O MAU CHEIRO QUE NÓS CHAMAMOS DE INVEJA DE CARACTERÍSTICA O 
45
FEATURE ENVY QUE O FOWLER ASSIM DENOMINOU E A GENTE PODE CARACTERIZAR ASSIM TAMBÉM 
46
NÓS JÁ ENCONTRAMOS ELE LÁ NO EXEMPLO DO 
47
DO TELL DONT ASK TAMBÉM ALGO PARECIDO COM ISSO 
48
NÓS IREMOS DANDO PROSSEGUIMENTO AO CICLO NÓS IDENTIFICAMOS NESTE 
49
NESSE EXEMPLO APENAS E TÃO SOMENTE MAU CHEIRO E VAMOS 
50
APLICAR CONJUNTO DE TÉCNICAS DE REFATORAÇÃO PROPOSTO PELO FOWLER 
51
VAMOS FUNDAMENTAR ISSO TAMBÉM USANDO ESSES PRINCÍPIOS QUE ESTÃO APONTADOS AÍ 
52
O TELL DONT ASK REDIRECIONAMENTO E A A EXPRESSÃO DA INTENÇÃO PRINCIPALMENTE 
53
PARA CARACTERIZAR MELHOR DAR SUPORTE MELHOR NO QUE A GENTE ESTÁ FAZENDO 
54
ESSE ÚLTIMO POR EXEMPLO É PARA DAR O NOME AO MÉTODO QUE EU VOU 
55
EXTRAIR E MOVER DE CLASSE ESTÁ CERTO 
56
O O PRIMEIRO A PRIMEIRA COISA QUE A GENTE VAI FAZER ENTÃO É 
57
ONDE ESTAVA O MAU CHEIRO QUE É ONDE EU FAÇO 
58
ACESSO USANDO OS GETTERS DE PHONE NÃO É 
59
NA CLASSE CUSTOMER ENTÃO EU TENHO ALI O MÉTODO 
60
GETMOBILEPHONENUMBER E PARA ISSO EU VOU E 
61
OBTENHO GETTERS USANDO OS GETTERS DO PHONE NÃO É ESTÁ CERTO 
62
EU VOU OBTENDO ESSES VALORES ENTÃO O QUE É QUE EU VOU FAZER 
63
ESSE CONJUNTO QUE ESTÁ MARCADO AÍ COMO AMARELO NÃO É ESTÁ CERTO 
64
FUNDO AMARELO EU VOU EXTRAIR O MÉTODO MAS NÃO VOU POR ELE LUGAR NENHUM ESTÁ CERTO 
65
EU SOU ESTOU EXTRAINDO 
66
AÍ O QUE É QUE EU FAÇO SEGUIDA 
67
EU VOU MOVER ESSE MÉTODO QUE EU ACABEI DE EXTRAIR PARA A CLASSE PHONE ESTÁ CERTO 
68
É COMO SE É EU TIVESSE TIRADO UMA CÓPIA DO MÉTODO ANTERIOR ESTÁ CERTO 
69
E MOVESSE PARA A CLASSE PHONE 
70
E EU VOU FAZER REDIRECIONAMENTO OU SEJA ONDE TINHA AQUELE CÓDIGO TODO QUE 
71
QUE ERA INVEJOSO DA CLASSE PHONE NÃO É ESTÁ CERTO 
72
EU VOU USAR O REDIRECIONAMENTO ESTÁ CERTO 
73
ENTÃO VOCÊS VEJAM QUE É TIPO DE DELEGAÇÃO QUE EU CHAMO DE REDIRECIONAMENTO 
74
PORQUE O NOME DO MÉTODO DE CUSTOMER O GETMOBILEPHONENUMBER 
75
É IGUAL AO NOME QUE EU COLOQUEI NO MÉTODO LÁ DE PHONE 
76
QUE TAMBÉM É O GETMOBILEPHONENUMBER ESTÁ CERTO 
77
O QUE É QUE EU ESTOU FAZENDO COM ISSO 
78
É ALGO PARECIDO COM O QUE EU VOU MOSTRAR AGORA PARA VOCÊS 
79
VOCÊS LEMBRAM QUANDO EU FALEI DO USO DO ANTROPOMORFISMO ORIENTAÇÃO A OBJETOS 
80
É ISSO QUE NÓS ESTAMOS FAZENDO AQUI 
81
É COMO SE AO TER USADO O TELL DONT ASK NÃO É 
82
E FAZER COM QUE A CLASSE PHONE TENHA O GETMOBILEPHONENUMBER ESTÁ CERTO 
83
É AO REDIRECIONAR AQUI É COMO EU CLIENTE NÃO É ESTÁ CERTO 
84
EU SOU CUSTOMER EU PERGUNTE AO MEU TELEFONE QUAL É O SEU NÚMERO 
85
E ELE VAI ME RESPONDER QUAL É O NÚMERO DELE ESTÁ CERTO 
86
ENTÃO NÓS ESTAMOS FAZENDO COMO SE ESTIVÉSSEMOS TRANSFORMANDO ISSO AQUI NUM 
87
NUM NUM SER VIVO NÃO É 
88
ESTÁ CERTO 
89
E É ISSO QUE A GENTE NA VERDADE ESTÁ FAZENDO 
90
AO FAZER ISSO USAR ESSE ANTROPOMORFISMO A GENTE DEIXA O CÓDIGO MAIS ORIENTADO 
91
A OBJETOS MAIS CLARO TERMOS DE INTENÇÃO DO QUE EU QUERO FAZER 
92
POR ISSO QUE EU MANTIVE O MESMO NOME PORQUE A INTENÇÃO É 
93
LEMBRA QUE EU FALEI DA EXPRESSÃO DA INTENÇÃO NÃO É ESTÁ CERTO 
94
AQUI EU ESTOU CARACTERIZANDO ATRAVÉS DO REDIRECIONAMENTO 
95
QUE EU QUERO A MESMA COISA EU QUERO OBTER O NÚMERO DO DO DO TELEFONE ESTÁ CERTO 
96
ENTÃO EU SÓ REDIRECIONO E AQUI QUE É IMPORTANTE ESSE TIPO DE COISA 
97
BOM FEITO ISSO ENTÃO VOCÊS PERCEBAM QUE EU JÁ TENHO AGORA 
98
CÓDIGO DO GETPHONE MOBILEPHONENUMBER NA 
99
CLASSE PHONE E TENHO O REDIRECIONAMENTO NA CLASSE CUSTOMER ESTÁ CERTO 
100
NUM MÉTODO DE MESMO NOME 
101
ENTÃO AGORA EU VOU FAZER O TESTE DA BATERIA 
102
ATÉ AGORA EU NÃO ESTAVA EU NÃO TINHA CONDIÇÕES DE FAZER O TESTE 
103
OU SEJA AQUILO QUE ESTAVA PASSANDO AGORA TEM QUE PASSAR 
104
CONTINUAR VALENDO AQUI ESTÁ CERTO 
105
A BATERIA TEM QUE ESTAR SER BEM SUCEDIDA 
106
PORQUE EU SIMPLESMENTE FIZ MOVIMENTO ESTÁ CERTO 
107
EU MOVI UMA CÓPIA DO MEU GETMOBILEPHONENUMBER 
108
PARA O PHONE ESTÁ CERTO 
109
ENTÃO AGORA EU POSSO TESTAR E AQUELA BATERIA VAI FUNCIONAR NOVAMENTE 
110
ESTÁ CERTO 
111
AGORA EU DOU CONTINUIDADE À MINHA REFATORAÇÃO OU SEJA 
112
PORQUE É QUE EU PUDE USAR ANTERIORMENTE AQUELES 
113
DADOS QUE EU ESTAVA INVEJANDO QUE EU ESTAVA QUERENDO ESTÁ CERTO 
114
PORQUE ELES ESTAVAM EXPOSTOS ESTÁ CERTO 
115
ELES ESTAVAM EXPOSTOS 
116
AGORA O QUE É QUE EU FAÇO 
117
É DEIXAR FAZER COM QUE ESSES DADOS EXPOSTOS NÃO FIQUEM MAIS EXPOSTOS 
118
ENTÃO ONDE ELES ESTAVAM COMO PÚBLICO ESTÁ CERTO 
119
EU VOU TORNÁLOS PROTECTED 
120
É SE EU TIVER CERTEZA QUE A CLASSE PHONE NÃO VAI PRECISAR TER SUBCLASSES 
121
EU PODERIA ATÉ COLOCÁLA COMO FINAL AÍ EU PODERIA DEIXAR AÍ COMO PRIVATE 
122
DE QUALQUER FORMA O PROTECTED VAI FUNCIONAR E SÓ VAI TORNAR 
123
ACESSÍVEL ESSES GETTERS OBJETOS DE SUBCLASSES DE PHONE 
124
FEITO ISSO EU VOLTO A TESTAR A BATERIA ANTERIOR 
125
TEM QUE DAR BEM SUCEDIDA NOVAMENTE 
126
QUALQUER DESSES TESTES QUANDO NÃO NÃO 
127
EU FIZ ALGUMA ALGUM ALGUM ERRO NÃO ESTÁ CERTO 
128
E A BATERIA NÃO DÁ CERTO EU VOLTO NO CÓDIGO ANTERIOR 
129
VEJO O QUE FOI QUE EU ERREI ESTÁ CERTO 
130
E APLICO A BATERIA DE NOVO 
131
VOCÊS PERCEBAM LÁ QUE NO CICLO DE REFATORAÇÃO EU FICO FAZENDO ISSO LÁ 
132
QUANDO EU APLICO AS TÉCNICAS A TÉCNICA DE REFATORAÇÃO 
133
PORQUE ELE PODE TER VÁRIOS PASSOS E CADA PASSO EU TESTO NOVAMENTE 
134
COM ISSO NÃO É AO FINAL EU TENHO AÍ AGORA CÓDIGO DA 
135
CLASSE CUSTOMER E DA CLASSE PHONE REFATORADO 
136
COMPLETAMENTE REFATORADO OU SEJA SEM A INVEJA DE CARACTERÍSTICA 
137
OU SEJA AGORA ESSE CÓDIGO CHEGOU NO MEU CICLO FINAL E EU ESTOU SAINDO COM 
138
CÓDIGO REFATORADO E TESTADO OU SEJA EU GARANTO QUE O COMPORTAMENTO 
139
QUE ESTAVA ANTES DA REFATORAÇÃO CONTINUA VALENDO AGORA 
140
COM ISSO NÓS MOSTRAMOS PARA VOCÊS EXEMPLO DE REFATORAÇÃO 
141
SEGUINDO AQUELE CICLO DE REFATORAÇÃO ESTÁ CERTO 
142
E VOCÊS VEJAM QUE A GENTE FAZ ISSO DE FORMA SEGURA 
143
NÓS GARANTIMOS QUE AO FINAL O CÓDIGO CORRESPONDENTE À 
144
REFATORAÇÃO DESSE MAU CHEIRO QUE É O INVEJA DE CARACTERÍSTICA 
145
NO FINAL O COMPORTAMENTO QUE ESTAVA ANTES CONTINUA VALENDO 
146
MESMO DEPOIS DA REFATORAÇÃO 
147
OBRIGADO 
148
[MÚSICA]