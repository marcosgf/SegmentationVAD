0
[MÚSICA] 
1
[MÚSICA] OLÁ A TODOS 
2
ESSE É O HANDS ON DE REFATORAÇÃO 
3
TÁ NESSE HANDS ON NÉ 
4
A GENTE NÃO VAI VER UMA REFATORAÇÃOZINHA FOCADA NÉ A GENTE VAI PEGAR 
5
EXEMPLO MAIOR E MOSTRAR COMO QUE FUNCIONA A REFATORAÇÃO AO LONGO DE VÁRIOS PASSOS 
6
NÉ COMO QUE A GENTE VAI TRABALHANDO ESSAS MUDANÇAS DENTRO DO NOSSO CÓDIGO 
7
TÁ ENTÃO NESSA PRIMEIRA PARTE DO VÍDEO EU 
8
VOU MOSTRAR PRA VOCÊS POUQUINHO DO QUE QUE A GENTE VAI MEXER TÁ 
9
ESSE EXEMPLO QUE EU PEGUEI AQUI PRA REFATORAR PRA VOCÊS É O EXEMPLO DO 
10
PRIMEIRO CAPÍTULO DO LIVRO DO MARTIN FOWLER DE REFATORAÇÃO 
11
TÁ É EXEMPLO DE UMA VIDEOLOCADORA 
12
TÁ ENTÃO 
13
A GENTE TEM AQUI UMA CLASSE CUSTOMER TÁ ELE TEM AQUI O NOME 
14
TEM AQUI AS LOCAÇÕES DELE TÁ E ELE TEM ESSE MÉTODO AQUI 
15
STATEMENT NÉ VOCÊS PODEM VER AQUI QUE NÃO É MÉTODO PEQUENO 
16
TÁ 
17
NÃO É MÉTODO BONITO TÁ 
18
É MÉTODO BEM FEIO MAS EU TENHO CERTEZA QUE VOCÊ JÁ VIU 
19
PIORES AÍ CÓDIGOS QUE VOCÊ JÁ MEXEU CÓDIGOS QUE VOCÊ TRABALHOU 
20
TÁ ENTÃO A IDEIA DESSE CÓDIGO É QUE ELE GERA 
21
UMA STRING NÉ QUE TÁ VENDO AQUI É ESSE RESULT AQUI 
22
ONDE ELE VAI FALANDO OLHA EU TENHO AQUI A FICHA DE LOCAÇÕES DO FULANO DE TAL 
23
NÉ E AÍ ELE VAI ADICIONANDO QUAIS OS FILMES TEM NESSA FICHA NÉ 
24
ENTÃO Ó NOTE QUE ELE VAI ADICIONANDO 
25
AQUI OS FILMES E AÍ NO FINAL ELE DIZ AQUI QUANTO QUE É 
26
QUANTO QUE JÁ GASTOU NÉ E QUANTOS PONTOS DE FREQUÊNCIA 
27
NÉ É AQUELE AQUELE 
28
AQUELE CLIENTE ALI DA LOCADORA POSSUI 
29
TÁ ENTÃO A GENTE VAI ENTENDER POUQUINHO 
30
A LÓGICA DISSO DAQUI NÉ E A GENTE A IDEIA É O SEGUINTE NÉ 
31
O CHEFE CHEGOU E FALOU ASSIM OLHA EU QUERO ESSE MÉTODO STATEMENT 
32
SÓ QUE EU QUERO ELE COMO 
33
EU QUERO QUE ELE DÊ O RETORNO HTML 
34
TÁ E AÍ VOCÊ FALA ASSIM OK E AGORA 
35
COMO É QUE EU VOU FAZER PORQUE EU NÃO CONSIGO REAPROVEITAR 
36
ABSOLUTAMENTE NADA DESSE CÓDIGO 
37
SE A GENTE OLHAR AQUI ELE FAZ O CÁLCULO NÉ ELE TEM A LÓGICA AQUI DOS DIAS 
38
DE QUANTO CUSTA CADA LOCAÇÃO E QUANTOS PONTOS DE FREQUÊNCIA ELE 
39
GANHA CADA CASO E A SOMATÓRIA DISSO E TAL 
40
E NADA DISSO ELE VAI CONSEGUIR APROVEITAR NESSE 
41
PRA PODER FAZER ESSA PARTE AÍ DE IMPRIMIR ISSO HTML 
42
TÁ ENTÃO A IDEIA É QUE A GENTE REFATORE ESSE 
43
CÓDIGO AQUI NÉ E NO FINAL A GENTE ANALISE AÍ COMO É QUE FICA NÉ 
44
SE ELE REALMENTE VAI CONSEGUIR FAZER ISSO OU NÃO 
45
TÁ ENTÃO VAMOS DAR UMA OLHADA AQUI 
46
A GENTE TEM AQUI A CLASSE CUSTOMER 
47
NÉ ELE TEM AQUI VETOR AQUI ONDE ELE TEM AS LOCAÇÕES 
48
TEMOS ESSA CLASSE RENTAL QUE É UMA CLASSE BASICAMENTE DE DADOS NÉ ELE 
49
TEM UMA INSTÂNCIA DO FILME E A QUANTIDADE DE DIAS QUE AQUELE FILME FOI ALUGADO 
50
E TEMOS A CLASSE MOVIE NÉ 
51
QUE ELE TEM AQUI O TÍTULO E O QUE ELE CHAMA DE PRICECODE 
52
ESSE PRICECODE ELE É BASICAMENTE O TIPO DA LOCAÇÃO NÉ 
53
ENTÃO SE ELE FOR SEI LÁ O QUE AQUI NO BRASIL A GENTE CHAMA DE CATÁLOGO 
54
NÉ SERIA ESSE REGULAR É UMA CATEGORIA NÉ O NEWRELEASE 
55
QUE É O LANÇAMENTO NÉ SERIA UMA OUTRA CATEGORIA E A GENTE AINDA TEM AQUI O 
56
FILME INFANTIL QUE SERIA AINDA UMA TERCEIRA CATEGORIA 
57
PRA GENTE ENTENDER POUQUINHO DESSA LÓGICA QUE ESTÁ DENTRO DESSE MÉTODO STATEMENT 
58
A GENTE VAI RECORRER AQUI AOS TESTES QUE EU CRIEI PRA ESSA CLASSE TÁ 
59
´ ENTÃO EU VOU RODAR AQUI PRA MOSTRAR PRA VOCÊS QUE OS TESTES ESTÃO FUNCIONANDO 
60
ENTÃO RODEI AQUI OS OITO TESTES TÃO FUNCIONANDO E EU VOU PARTIR 
61
NÉ DE CADA AQUI PRA IR FALANDO POUQUINHO PRA VOCÊS 
62
TÁ ENTÃO EU TENHO AQUI O MEU CUSTOMER 
63
JOHN NÉ EU CRIO AQUI NÉ NO MÉTODO SETUP 
64
NO CASO AQUI COMO ESSE EXEMPLO AQUI É POUCO ANTIGO ELE TÁ USANDO AINDA 
65
O JUNIT 3 NÉ ONDE TEM QUE ESTENDER TESTCASE MAS NÃO PREOCUPE COM ISSO 
66
QUE A GENTE NÃO VAI MEXER MUITO NOS TESTES TÁ 
67
ENTÃO A GENTE TEM AQUI ASSERTCONTAINS 
68
E VOCÊ FALA ASSIM EU NUNCA OUVIR FALAR NESSE ASSERTCONTAINS 
69
TAMBÉM NEM PODE PORQUE TÁ NA PRÓPRIA CLASSE NÉ 
70
ENTÃO ELE VAI NESSE ASSERTCONTAINS ELE VERIFICA 
71
NÉ SE AQUELE RESULTADO 
72
NÉ SE ELE TEM O CONTEÚDO 
73
TÁ 
74
ENTÃO ELE PROCURA SE EXISTE AQUELE CONTEÚDO DENTRO DA STRING NÉ 
75
COMO AQUI RETORNA UMA STRINGONA NÉ É O JEITO QUE A GENTE TEM DE VERIFICAR TÁ 
76
ENTÃO NÃO FALEI QUE O CÓDIGO ERA BOM 
77
MAS A GENTE TEM QUE SE VIRAR PRA TESTAR ELE 
78
ENTÃO A GENTE TEM AQUI O INDIANA JONES 
79
O CARA ALUGOU POR DIA ENTÃO ELE CUSTOU 2 
80
DAÍ ELE GANHOU 1 PONTO DE FREQUÊNCIA 
81
O INDIANA JONES ALUGADO POR 3 DIAS ELE CUSTA 350 
82
QUE QUE SIGNIFICA ISSO NÉ 
83
A PARTIR DE 2 
84
O CATÁLOGO 
85
ELE PODE FICAR 2 DIAS COM CATÁLOGO E A CADA DIA ADICIONAL ELE PAGA MAIS 150 
86
POR ISSO QUE AQUI É 350 
87
TÁ EU VOU USAR AQUI O TESTE PRA EXPLICAR AS REGRAS DE NEGÓCIO PRA VOCÊS 
88
VOCÊ PODE VER QUE AQUI NÉ ELE TEM ESSA MESMA LÓGICA NÉ 
89
SÓ QUE EU ACHO QUE AQUI NO TESTE É MUITO MAIS FÁCIL DE A GENTE VISUALIZAR 
90
BOM VAMOS AQUI PRO INFANTIL NÉ 
91
ENTÃO PROCURANDO NEMO NÉ ALUGOU 1 DIA CUSTOU 150 
92
PROCURANDO NEMO ALUGOU 5 DIAS 450 
93
QUE QUE É ISSO 
94
É 150 ATÉ 3 DIAS E DEPOIS MAIS 150 PRA CADA DIA ADICIONAL 
95
TÁ E AÍ DA MESMA FORMA QUE O CATÁLOGO 
96
NÉ QUE GANHA 1 PONTO DE FREQUÊNCIA 
97
ELE TAMBÉM VAI GANHAR 1 PONTO DE FREQUÊNCIA AQUI TODA VEZ QUE ELE ALUGAR 
98
FILME INFANTIL INDEPENDENTE DA QUANTIDADE DE DIAS 
99
TÁ E AÍ O CARA ALUGOU AQUI VINGADORES 2 
100
POR 1 DIA CUSTOU 3 E ELE ALUGOU VINGADORES 2 POR 3 DIAS 
101
CUSTOU 9 NÉ ENTÃO O LANÇAMENTO NÉ 
102
ELE CUSTA 3 POR DIA QUE A PESSOA FICA COM O FILME 
103
E AÍ SÓ QUE QUANDO ELE FICA MAIS DE 1 DIA COM O LANÇAMENTO 
104
ELE GANHA 1 PONTO DE FREQUÊNCIA A MAIS 
105
ENTÃO NO CASO AQUI Ó QUANDO ELE FICOU 1 DIA COM VINGADORES 
106
ELE GANHOU 1 PONTO DE FREQUÊNCIA E QUANDO ELE FICOU 3 DIAS COM VINGADORES 
107
ELE GANHOU 2 PONTOS DE FREQUÊNCIA 
108
A GENTE TEM AQUI TESTE QUE ELE CHAMA AQUI DE MANYRENTS NÉ 
109
QUE ELE BOTA ALI VÁRIOS FILMES COM QUANTIDADES VARIADAS DE DIAS 
110
NÉ EU FIZ AQUI AS CONTAS AQUI 
111
ISSO AQUI DARIA 8 PONTOS DE FREQUÊNCIA TOTAL DE 25 NÉ 
112
ENTÃO ISSO AQUI É IMPORTANTE TAMBÉM AINDA PRA GENTE NÃO TER TESTES SÓ COM TIPO NÉ 
113
A GENTE TEM AQUI TESTE QUE COMBINA POUQUINHO DE TUDO AÍ 
114
PRA VER SE ALGUM CASO ISSO AQUI É QUEBRADO 
115
TÁ A GENTE SIMPLIFICOU AQUI O TESTE NÉ 
116
ATÉ APROVEITANDO PRA FALAR POUQUINHO PRA VOCÊS QUE A GENTE PODE CRIAR 
117
MÉTODOS AUXILIARES DENTRO DAS CLASSES DE TESTE 
118
NO CASO AQUI Ó EU CRIEI ESSE RENTMOVIE NÉ QUE EU PASSO O TÍTULO 
119
O TIPO E A QUANTIDADE DE DIAS ELE VEM CRIA UMA NOVA CLASSE DO TIPO MOVIE 
120
QUE A GENTE VIU AQUI QUE TEM O TÍTULO E O PRICECODE E CRIA RENTAL 
121
QUE TEM O MOVIE E A QUANTIDADE DE DIAS QUE A GENTE VIU 
122
TAMBÉM AQUI A CLASSE E DEPOIS ELE CHAMA NO CLIENTE ALI O ADDRENTAL 
123
CERTO 
124
ENTÃO COM ISSO A GENTE VIU MAIS OU MENOS COMO QUE FUNCIONA 
125
ESSE CÓDIGO AQUI E AGORA QUE ESTAMOS MAIS FAMILIARES COM ELE 
126
NO PRÓXIMO VÍDEO A GENTE COMEÇA EFETIVAMENTE A REFATORÁLO 
127
NÃO PERCA ESPERO POR VOCÊ 
128
MUITO OBRIGADO 
129
[MÚSICA]