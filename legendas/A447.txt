0
[MÚSICA] [MÚSICA] QUEM DIRIA 
1
QUEM DIRIA 
2
ESTAMOS AQUI NA ÚLTIMA PARTE DA NOSSA SEQUÊNCIA DE VÍDEOS DE REFATORAÇÃO 
3
ESTAMOS REFATORANDO O MESMO CÓDIGO E A CADA VÍDEO ELE MUDA MAIS DE CARA ESTÁ 
4
A GENTE PASSOU MONTE DE COISAS PARA AS CLASSES MOVIE RENTAL AGORA A GENTE 
5
CRIOU SUBCLASSES SUBSTITUIU AQUI MONTE DE IF MONTE DE CONDICIONAL POR POLIMORFISMO 
6
PESSOAL NÃO LEVA A MAL NÃO MAS EU ACHO ISSO MUITO BONITO 
7
PARA MIM ISSO AQUI É ARTE 
8
ESTÁ CERTO 
9
VAMOS VOLTAR NÃO É 
10
AGORA QUE A GENTE JÁ POLIU AQUI AS NOSSAS CLASSES MOVIE E RENTAL NÃO É 
11
CRIAMOS AQUI AS SUBCLASSES REGULAR 
12
NEWRELEASE A CHILDRENS NÃO É 
13
VAMOS VOLTAR AQUI NA NOSSA CLASSE CUSTOMER 
14
NOSSA SENHORA ARGH 
15
TINHA DESACOSTUMADO A VER ESSE CÓDIGO FEIOSO AÍ ESTÁ 
16
EU VOU É VAMOS REFATORAR 
17
UMA COISA QUE EU NÃO ESTOU GOSTANDO AQUI É PORQUE ELE FAZ ESSE 
18
CÁLCULO DA QUANTIDADE DA SOMA DOS AMOUNTS 
19
DA SOMA DOS FREQUENTRENTERPOINTS MISTURADO COM O STATEMENT 
20
ESTÁ ISSO EU NÃO ACHO LEGAL 
21
ENTÃO O QUE É QUE EU VOU FAZER AQUI 
22
EU VOU É CRIAR ESSES MÉTODOS ESTÁ 
23
E COMO ESTÁ TUDO MUITO MISTURADO FICA ATÉ DIFÍCIL DE EXTRAIR ISSO 
24
USANDO O ECLIPSE ESTÁ 
25
ENTÃO EU VOU CRIAR AQUI MÉTODO PUBLIC É DOUBLE É 
26
QUE EU VOU CHAMAR DE GETTOTALAMOUNT 
27
NESSE CASO FAZ SENTIDO ESSE MÉTODO ESTAR AQUI 
28
PORQUE EU ESTOU CALCULANDO O TOTAL DO CLIENTE 
29
ENTÃO É UMA COISA RELACIONADA AO CLIENTE 
30
ESTÁ 
31
ENTÃO EU VOU VIR AQUI VOU PEGAR ESSE 
32
ESSE PEDAÇÃO AQUI ONDE ESSE 
33
CÁLCULO ESTÁ TODO MISTURADO E VOU JOGAR AQUI DENTRO ESTÁ 
34
E AÍ EU VOU COMEÇAR A TIRAR COISAS QUE NÃO SÃO IMPORTANTES PARA MIM 
35
COMO ISSO ISSO AQUI ELE ESTÁ 
36
PEGANDO O GETAMOUNT É E AQUI EU POSSO TIRAR ISSO AQUI 
37
ALI ELE ESTÁ SOMANDO 
38
E NO FINAL AQUI EU POSSO DAR RETURN É 
39
ESSE TOTALAMOUNT 
40
DÁ PARA DAR UMA MELHORADA AQUI NÃO É 
41
EU NÃO PRECISARIA DE CRIAR ESSE THISAMOUNT 
42
É ATÉ UMA REFATORAÇÃO QUE EU GOSTO BASTANTE QUE É O INLINE NÃO É 
43
POR EXEMPLO SE EU VIER AQUI E DER INLINE ELE VAI SUBSTITUIR O PELA IMPLEMENTAÇÃO 
44
OLHA ELE FEZ ISSO AQUI SOZINHO ESTÁ VENDO 
45
O ECLIPSE ÀS VEZES É ESPERTO ÀS VEZES ELE É ESPERTO ESTÁ 
46
ENTÃO AQUI EU JÁ POSSO TIRAR AS COISAS REFERENTES AO CÁLCULO DO TOTAL NÃO É 
47
ENTÃO AQUI EU POSSO EXCLUIR EU POSSO EXCLUIR ISSO DAQUI 
48
E AQUI AO INVÉS DO TOTALAMOUNT 
49
EU DOU GETTOTALAMOUNT 
50
CERTO 
51
AÍ AQUI SE EU FOR OLHAR ELE TAMBÉM PEGA ESSE THISAMOUNT 
52
ELE USA ISSO ONDE 
53
SÓ AQUI BAIXO 
54
EU TAMBÉM POSSO VIR AQUI E DAR INLINE ESTÁ 
55
ENTÃO ELE VAI SUBSTITUIR ONDE TEM O THISAMOUNT POR EACH PONTO GETAMOUNT ESTÁ 
56
DÁ PARA TIRAR ESSES COMENTÁRIOS AQUI NÃO É 
57
O MÉTODO JÁ DÁ PARA ENTENDER MELHOR NÃO É 
58
BOM VOU FAZER A MESMA COISA AGORA PARA OS FREQUENTRENTERPOINTS ESTÁ 
59
ENTÃO TAMBÉM VOU COMEÇAR A CRIAR AQUI NA MÃO MESMO NÃO É 
60
ENTÃO GETTOTALFREQUENTRENTERPOINTS 
61
E VOU TAMBÉM COPIAR TODO ESSE 
62
PEDAÇO AQUI QUE PODE TER ALGUMA COISA A VER COM ISSO 
63
E AÍ EU VOU EXCLUIR AS LINHAS QUE NÃO TEM A VER 
64
QUE É ESSA AQUI QUE IMPRIME E ESSA DAQUI TAMBÉM QUE IMPRIME CERTO 
65
ENTÃO ELE VAI DAR RETURN FREQUENTRENTERPOINTS AQUI 
66
[SEMÁUDIO] CERTO 
67
E AQUI TAMBÉM EU CONSIGO JÁ EXCLUIR ALGUMAS COISAS 
68
O TOTAL DE LINHAS DE CÓDIGO NÃO É 
69
VOCÊ PODE PERCEBER QUE ELE NÃO POR EXEMPLO 
70
NESSE MÉTODO EU NEM VOU MEXER MAIS COM O FREQUENTRENTERPOINTS 
71
EU SÓ VOU IMPRIMIR O TOTAL ALI ESTÁ 
72
ENTÃO A GENTE PODE VER AQUI QUE ESSA 
73
ESSE MÉTODO STATEMENT AGORA ELE SÓ 
74
SÓ É RESPONSÁVEL POR ESSA PARTE DE GERAR O STATEMENT MESMO ESTÁ 
75
OPA EU ESTOU ESQUECENDO DE RODAR O TESTE 
76
DEIXA EU RODAR AQUI ANTES QUE DÊ PROBLEMA ALI E EU NÃO SEI O QUE É QUE ACONTECEU 
77
OK ESTÁ 
78
BOM AÍ PODE VIR O PESSOAL AÍ QUE É MUITO PRECIOSISTA RELAÇÃO 
79
A DESEMPENHO E AÍ FALAR ASSIM GUERRA PRESTA ATENÇÃO NO QUE VOCÊ FEZ AÍ NÃO É 
80
VOCÊ TINHA ALI LOOP IO ALI AQUI DENTRO DO STATEMENT ONDE VOCÊ APROVEITAVA PARA 
81
CALCULAR OS FREQUENTRENTERPOINTS E VOCÊ APROVEITAVA PARA CALCULAR O TOTALAMOUNT 
82
AGORA VOCÊ TEM AQUI LOOP QUANDO VOCÊ CHAMA O GETTOTALAMOUNT 
83
ELE CHAMA OUTRO LOOP E QUANDO VOCÊ TEM O TOTAL DE FREQUENTRENTERPOINTS 
84
VOCÊ AINDA TEM OUTRO LOOP ESTÁ 
85
É SIM ESTÁ 
86
REALMENTE MUITAS REFATORAÇÕES ACABAM PIORANDO O DESEMPENHO DO CÓDIGO ESTÁ 
87
E AÍ EU CHAMO ATENÇÃO PARA DUAS COISAS 
88
A PRIMEIRA COISA É QUE ESSA QUESTÃO DO DESEMPENHO 
89
VOCÊ NÃO PODE SER AQUELE CARA QUE REDUZIR O MÁXIMO DESEMPENHO DO CÓDIGO É É E 
90
AÍ VOCÊ VAI GASTAR MUITO DO SEU TEMPO COM UMA COISA QUE TALVEZ NÃO AGREGUE VALOR 
91
ENTÃO A PRIMEIRA COISA QUE VOCÊ TEM QUE SE PERGUNTAR 
92
RELAÇÃO AO DESEMPENHO É QUAL QUE É O REQUISITO DE DESEMPENHO 
93
SE MESMO COM AQUELA ESTRUTURA QUE NÃO É ÓTIMA 
94
SE MESMO ASSIM ATENDE AO REQUISITO DE DESEMPENHO 
95
ÀS VEZES VOCÊ ESTÁ MEXENDO UMA COISA QUE VOCÊ VAI GANHAR 1 MILISSEGUNDO 
96
ENQUANTO VOCÊ TEM ACESSO A BANCO DE DADOS QUE DEMORA 50 
97
ENTÃO AQUELA OTIMIZAÇÃO QUE VOCÊ ESTÁ FAZENDO POR MAIS QUE DE REPENTE SEI 
98
LÁ DIMINUI PELA METADE O TEMPO DAQUELE MÉTODO ELA NÃO VAI SER SIGNIFICATIVA 
99
TERMOS DE FUNCIONALIDADE E PARA O CLIENTE ISSO NÃO VAI FAZER A MENOR DIFERENÇA ESTÁ 
100
ENTÃO DITO ISSO O SEGUNDO PONTO QUE EU QUERIA FALAR É QUE MUITAS VEZES 
101
O CÓDIGO MAIS LIMPO E MAIS REFATORADO ELE É MUITO MAIS FÁCIL DE VOCÊ OTIMIZAR 
102
VAMOS FAZER ISSO AQUI AGORA ESTÁ 
103
NOTE QUE AQUI EU TENHO O FREQUENTRENTERPOINTS E O 
104
GETTOTALAMOUNT ELES ESTÃO AGORA SEPARADOS 
105
COM ISSO EU CONSIGO O QUÊ 
106
EU CONSIGO CRIAR CASH DESSAS INFORMAÇÕES 
107
ENTÃO EU POSSO VIR AQUI POR EXEMPLO E CRIAR ESSAS VARIÁVEIS 
108
AQUI DE FREQUENTRENTERPOINTS NA MINHA CLASSE ESTÁ 
109
ENTÃO EU VOU COLOCAR AQUI PRIVATE FREQUENTRENTERPOINTS E 
110
EU POSSO VIR AQUI E COLOCAR O TOTALAMOUNT TAMBÉM COMO UMA VARIÁVEL AQUI ESTÁ 
111
ENTÃO O QUE É QUE EU POSSO FAZER 
112
TODA A VEZ QUE EU ADICIONAR EU POSSO AO INVÉS DE CALCULAR AQUELE TOTAL TODAS 
113
AS VEZES TODA VEZ QUE EU ADICIONAR UMA LOCAÇÃO EU VOU E JÁ SOMO AQUILO NO TOTAL 
114
ENTÃO EU POSSO CHAMAR QUANTAS VEZES EU QUISER O GETTOTALAMOUNT 
115
QUE ELE NÃO VAI FICAR REPETINDO ESSE CÁLCULO ESTÁ 
116
ENTÃO O QUE É QUE EU PRECISO FAZER AQUI 
117
QUANDO EU TENHO É É É QUANDO EU ADICIONO ELEMENTO EU VOU VIR AQUI NO MEU 
118
EU VOU ATÉ INICIALIZAR AQUI ISSO JÁ ESTAVA PRONTO NÃO É 
119
MAS EU VOU ARRUMAR DIREITINHO ESTÁ 
120
ENTÃO ESSE FREQUENTRENTERPOINTS AQUI É É QUANDO 
121
QUANDO EU ADICIONAR RENTAL NÃO É 
122
EU VOU VIR AQUI E VOU SOMAR ISSO NÃO É 
123
EU VOU FAZER ESSA LINHA AQUI 
124
EU VOU PASSAR ESSA LINHA AQUI PARA CIMA 
125
E A MESMA COISA AQUI PARA O AMOUNT NÃO É 
126
EU TAMBÉM VOU PASSAR ESSA LINHA AQUI PARA CIMA 
127
SÓ QUE AQUI NÃO VAI SER MAIS O EACH NÃO É 
128
VAI SER ESSE ESTÁ CHAMANDO DE ARG AQUI EU VOU CHAMAR DE RENTAL 
129
PARA VOCÊ VER COMO É QUE O CÓDIGO ESTAVA RUIM ELE TINHA UMA VARIÁVEL CHAMADA ARG 
130
QUANDO EU VEJO UMA VARIÁVEL CHAMADA ARG EU PENSO ASSIM ARGH 
131
VAMOS LÁ 
132
PASSEI PARA CÁ ESTÁ 
133
ENTÃO AGORA EU ESTOU FAZENDO CÁLCULO 
134
EU ESTOU MEIO QUE CRIANDO CASH DESSAS INFORMAÇÕES ESTÁ 
135
E AGORA O MEU GETTOTALFREQUENTRENTERPOINTS 
136
EU VOU APAGAR ISSO TUDO AQUI E ELE VAI SIMPLESMENTE RETORNAR O QUE EU ESTOU 
137
GUARDANDO NAQUELA VARIÁVEL NÃO É 
138
NESSE CASO EU ESTOU É É 
139
EU ESTOU AQUI NO MOMENTO QUE EU ADICIONO UMA NOVA LOCAÇÃO 
140
ELE JÁ PEGA AQUELES VALORES E JÁ SOMA AÍ NESSAS VARIÁVEIS ESTÁ 
141
ENTÃO EU VOU SALVAR VOU RODAR OPA 
142
PODE PÔR COMO UNIT TEST AQUI ESTÁ 
143
ELE RODA E CONTINUA FUNCIONANDO 
144
OLHA A QUANTIDADE DE CÓDIGO QUE EU TIREI ALI NÃO É 
145
AÍ VOCÊ FALOU ASSIM QUANDO VOCÊ REFATOROU VOCÊ TORNOU O CÓDIGO MENOS EFICIENTE 
146
MAS JUSTAMENTE POR TER REFATORADO É QUE EU TIVE A FACILIDADE DE CRIAR ESSE CASH 
147
FAZER ISSO ENQUANTO ESTAVA LÁ NO MEIO DO STATEMENT TERIA SIDO BEM MAIS 
148
COMPLICADO ESTÁ 
149
ENTÃO ESSE AQUI É O NOSSO CÓDIGO FINAL NÃO É 
150
DA REFATORAÇÃO 
151
ESPERO QUE COM ESSA COM ESSA SEQUÊNCIA DE VÍDEOS VOCÊ TENHA VISTO COMO QUE É 
152
FUNCIONA ESSA QUESTÃO DA REFATORAÇÃO 
153
DA IMPORTÂNCIA DOS TESTES PARA TE DAR SEGURANÇA ESTÁ 
154
FELIZMENTE AQUI EU NÃO QUEBREI NENHUM TESTE DURANTE A REFATORAÇÃO MAS É 
155
É EU JÁ FIZ ESSE EXERCÍCIO OUTRAS VEZES E JÁ QUEBREI ACIDENTALMENTE ALGUM TESTE 
156
ALGUMA COISINHA QUE EU ACABEI DEIXANDO ERRADO ALI PELO MEIO DO CAMINHO ESTÁ 
157
ENTÃO VER ESSA DINÂMICA DOS TESTES DENTRO DA REFATORAÇÃO 
158
ESSA IDEIA DE FAZER PEQUENOS PASSOS E VOCÊ IR RODANDO TESTES 
159
MUITAS VEZES NÃO É FÁCIL VOCÊ SABE AONDE VOCÊ QUE CHEGAR 
160
MAS VOCÊ NÃO SABE EXATAMENTE QUAIS PASSOS QUE VOCÊ PRECISA NÃO É 
161
E A GENTE VAI DE POUQUINHO POUQUINHO MELHORANDO O CÓDIGO E A GENTE PODE VER 
162
REALMENTE QUE ERA CÓDIGO BEM MAIS COMPLICADO E A GENTE CONSEGUIU É 
163
É A PARTIR DA REFATORAÇÃO IR MELHORANDO ELE NÃO É 
164
E ATÉ CHEGAMOS AQUI NUM DESIGN CRIAMOS SUBCLASSES 
165
COMEÇAMOS A UTILIZAR POLIMORFISMO NÃO É 
166
PODEMOS ATÉ TERMINAR AQUI OTIMIZANDO O DESEMPEMHO ESTÁ 
167
ÚLTIMO DISCLAIMER AQUI É QUE SE VOCÊ PEGAR O LIVRO DO MARTIN FOWLER ONDE TEM 
168
ESSA REFATORAÇÃO VOCÊ VAI VER QUE ELE FEZ AS COISAS POUCO DIFERENTE DAS QUE EU FIZ 
169
ENTÃO RECOMENDO VOCÊ A DAR UMA OLHADA LÁ PARA VOCÊ VER QUE 
170
NÃO EXISTE SÓ UMA SOLUÇÃO PARA ESSE TIPO DE PROBLEMA ESTÁ CERTO 
171
MUITO OBRIGADO POR ASSISTIR 
172
ESPERO QUE TENHA ENRIQUECIDO O CONHECIMENTO DE REFATORAÇÃO DE VOCÊS 
173
MUITO OBRIGADO 
174
[MÚSICA]